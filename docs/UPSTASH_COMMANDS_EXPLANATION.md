# Upstash Commands èªªæ˜

## ğŸ“Š ä»€éº¼æ˜¯ Commandsï¼Ÿ

**Commands** æ˜¯æŒ‡æ‚¨å° Redis åŸ·è¡Œçš„**æ“ä½œæ¬¡æ•¸**ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡è®€å–ã€å¯«å…¥ã€åˆªé™¤ç­‰æ“ä½œçš„è¨ˆæ•¸ã€‚

## ğŸ” å¸¸è¦‹çš„ Redis Commands

### è®€å–æ“ä½œï¼ˆRead Commandsï¼‰
- `GET` - ç²å–ä¸€å€‹ key çš„å€¼
- `MGET` - ç²å–å¤šå€‹ key çš„å€¼
- `KEYS` - æœå°‹ç¬¦åˆæ¢ä»¶çš„ keys
- `EXISTS` - æª¢æŸ¥ key æ˜¯å¦å­˜åœ¨
- `TTL` - æŸ¥çœ‹ key çš„éæœŸæ™‚é–“

### å¯«å…¥æ“ä½œï¼ˆWrite Commandsï¼‰
- `SET` - è¨­å®šä¸€å€‹ key çš„å€¼
- `SETEX` - è¨­å®š key çš„å€¼ä¸¦æŒ‡å®šéæœŸæ™‚é–“
- `DEL` - åˆªé™¤ä¸€å€‹æˆ–å¤šå€‹ keys
- `INCR` - å¢åŠ æ•¸å€¼
- `EXPIRE` - è¨­å®š key çš„éæœŸæ™‚é–“

## ğŸ’¡ åœ¨ PeiPlay ä¸­çš„å¯¦éš›æ‡‰ç”¨

### ç¯„ä¾‹ 1ï¼šè®€å–å¤¥ä¼´åˆ—è¡¨
```typescript
// é€™æœƒåŸ·è¡Œ 1 å€‹ GET command
const partners = await Cache.get('partners:list:...');
```

### ç¯„ä¾‹ 2ï¼šè¨­å®š cache
```typescript
// é€™æœƒåŸ·è¡Œ 1 å€‹ SETEX command
await Cache.set('partners:detail:123', partnerData, 300);
```

### ç¯„ä¾‹ 3ï¼šæ¸…é™¤ cache
```typescript
// é€™æœƒåŸ·è¡Œå¤šå€‹ DEL commandsï¼ˆæ¯å€‹ key ä¸€å€‹ï¼‰
await Cache.deletePattern('partners:list:*');
// å¦‚æœæœ‰ 10 å€‹ keys ç¬¦åˆï¼Œå°±æ˜¯ 10 å€‹ commands
```

## ğŸ“ˆ Free Tier é™åˆ¶

æ ¹æ“šæ‚¨çš„æˆªåœ–ï¼š
- **å…è²»æ–¹æ¡ˆ**ï¼šæ¯æœˆ 500,000 commandsï¼ˆ50 è¬æ¬¡æ“ä½œï¼‰
- **ç›®å‰ä½¿ç”¨**ï¼š1 / 500kï¼ˆå¹¾ä¹æ²’ç”¨ï¼‰

### é€™å°æ‚¨çš„æ‡‰ç”¨æ„å‘³è‘—ä»€éº¼ï¼Ÿ

**500,000 commands/æœˆ = ç´„ 16,666 commands/å¤© = ç´„ 694 commands/å°æ™‚**

å°æ–¼å°å‹åˆ°ä¸­å‹æ‡‰ç”¨ä¾†èªªï¼Œé€™é€šå¸¸è¶³å¤ ä½¿ç”¨ã€‚

## ğŸ§® è¨ˆç®—ç¯„ä¾‹

å‡è¨­æ‚¨çš„æ‡‰ç”¨æ¯å¤©æœ‰ï¼š
- 1,000 å€‹ç”¨æˆ¶è¨ªå•é¦–é ï¼ˆæ¯å€‹è®€å– partners list = 1 commandï¼‰
- 100 å€‹ç”¨æˆ¶æŸ¥çœ‹å¤¥ä¼´è©³æƒ…ï¼ˆæ¯å€‹è®€å– partner detail = 1 commandï¼‰
- 50 å€‹é ç´„å‰µå»ºï¼ˆæ¯å€‹æ¸…é™¤ cache = 5 commandsï¼‰

**æ¯æ—¥ç¸½è¨ˆ**ï¼š1,000 + 100 + (50 Ã— 5) = **1,350 commands/å¤©**

**æ¯æœˆç¸½è¨ˆ**ï¼š1,350 Ã— 30 = **40,500 commands/æœˆ**

é€™é ä½æ–¼ 500,000 çš„é™åˆ¶ï¼Œæ‰€ä»¥å…è²»æ–¹æ¡ˆè¶³å¤ ä½¿ç”¨ï¼

## âš ï¸ éœ€è¦æ³¨æ„çš„æƒ…æ³

### æœƒå¤§é‡æ¶ˆè€— Commands çš„æ“ä½œï¼š

1. **æ‰¹é‡åˆªé™¤**
   ```typescript
   // å¦‚æœç¬¦åˆçš„ keys å¾ˆå¤šï¼Œæœƒæ¶ˆè€—å¤§é‡ commands
   await Cache.deletePattern('partners:list:*');
   ```

2. **é »ç¹çš„ cache æ›´æ–°**
   ```typescript
   // æ¯æ¬¡æ›´æ–°éƒ½æœƒåŸ·è¡Œ SET command
   await Cache.set(key, value, ttl);
   ```

3. **è¤‡é›œçš„æŸ¥è©¢**
   ```typescript
   // KEYS æ“ä½œå¯èƒ½æ¶ˆè€—è¼ƒå¤š
   await client.keys('pattern:*');
   ```

## âœ… æœ€ä½³å¯¦è¸

### 1. åˆç†è¨­å®š TTL
```typescript
// è¨­å®šè¼ƒé•·çš„ TTLï¼Œæ¸›å°‘æ›´æ–°é »ç‡
await Cache.set(key, value, CacheTTL.MEDIUM); // 5 åˆ†é˜
```

### 2. é¿å…é »ç¹çš„ cache invalidation
```typescript
// åªåœ¨çœŸæ­£éœ€è¦æ™‚æ¸…é™¤ cache
await CacheInvalidation.onPartnerUpdate(partnerId);
```

### 3. ä½¿ç”¨æ‰¹é‡æ“ä½œ
```typescript
// ç›¡é‡åˆä½µæ“ä½œï¼Œæ¸›å°‘ commands æ•¸é‡
```

## ğŸ“Š ç›£æ§ä½¿ç”¨é‡

åœ¨ Upstash Dashboard ä¸­ï¼š
- **Details** é é¢å¯ä»¥çœ‹åˆ°ç›®å‰ä½¿ç”¨é‡
- **Usage** é é¢å¯ä»¥çœ‹åˆ°è©³ç´°çš„ä½¿ç”¨çµ±è¨ˆ
- æ¥è¿‘é™åˆ¶æ™‚æœƒæ”¶åˆ°é€šçŸ¥

## ğŸš€ å¦‚æœè¶…éé™åˆ¶

å¦‚æœæ‚¨çš„æ‡‰ç”¨æˆé•·åˆ°éœ€è¦æ›´å¤š commandsï¼š

1. **å‡ç´šåˆ° Pay as You Go**ï¼š$0.2 / 100K commands
2. **å„ªåŒ– cache ç­–ç•¥**ï¼šæ¸›å°‘ä¸å¿…è¦çš„æ“ä½œ
3. **ä½¿ç”¨ Fixed Plan**ï¼š$20/æœˆï¼ŒåŒ…å«æ›´å¤šè³‡æº

## ğŸ’¡ ç¸½çµ

- **Commands = Redis æ“ä½œæ¬¡æ•¸**
- **Free Tier = 500,000 commands/æœˆ**
- **å°å°å‹æ‡‰ç”¨ä¾†èªªé€šå¸¸è¶³å¤ **
- **å¯ä»¥é€é Upstash Dashboard ç›£æ§ä½¿ç”¨é‡**

ç›®å‰æ‚¨åªç”¨äº† 1 å€‹ commandï¼Œæ‰€ä»¥å®Œå…¨ä¸ç”¨æ“”å¿ƒï¼

